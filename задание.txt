Спецификация веб-приложения для подачи заявки на годовой займ

Описание приложения
Веб-приложение позволяет пользователям подать заявку на получение годового займа. 
Приложение собирает необходимые данные от пользователя, проводит валидацию введенных данных, 
принимает решение о выдаче займа на основе заданных критериев и отображает результат пользователю.
 В случае одобрения или отклонения заявки пользователю отправляется уведомление по электронной почте.

Описание пользовательского интерфейса (UI)

Главная страница (Форма заявки)

	•	Заголовок: “Заявка на годовой займ”
	•	Поля ввода:
	•	Имя (текстовое поле)
	•	Дата рождения (выбор даты)
	•	Email (текстовое поле)
	•	Телефон (текстовое поле, по умолчанию заполнено “+7”)
	•	Статус занятости (выпадающий список: “Работающий”, “Безработный”)
	•	Месячная зарплата (текстовое поле)
	•	Ежемесячные выплаты по другим кредитам (текстовое поле)
	•	Кнопка: “Отправить заявку”

Поведение:

	•	Пользователь вводит все необходимые данные.
	•	При нажатии на кнопку “Отправить заявку” происходит валидация данных.
	•	В случае ошибок отображаются соответствующие сообщения.
	•	При успешной валидации пользователь перенаправляется на страницу результата.

Страница результата

	•	Заголовок: “Результат заявки на займ”
	•	Сообщение:
	•	В случае одобрения: сообщение об успешном одобрении займа, сумма займа, сумма к возврату, контактная информация.
	•	В случае отказа: сообщение с указанием причины отказа.
	•	Кнопка: “Вернуться назад” (возвращает на главную страницу для подачи новой заявки)

    Мокап главной страницы
+---------------------------------------------------+
|            Заявка на годовой займ                 |
+---------------------------------------------------+
| [Имя ____________________________]                |
|                                                   |
| [Дата рождения ________________]                  |
|                                                   |
| [Email _________________________]                 |
|                                                   |
| [Телефон +7_____________________]                 |
|                                                   |
| [Статус занятости v]                              |
|   - Работающий                                    |
|   - Безработный                                   |
|                                                   |
| [Месячная зарплата ______________]                |
|                                                   |
| [Ежемесячные выплаты по другим кредитам ____]     |
|                                                   |
| [ Отправить заявку ]                              |
+---------------------------------------------------+

Мокап страницы результата

В случае одобрения:

+---------------------------------------------------+
|            Результат заявки на займ               |
+---------------------------------------------------+
|                                                   |
|   ✅ Ваш займ готов! Мы готовы выдать вам         |
|      [Сумма займа] рублей на 1 год.               |
|                                                   |
|   ℹ️ Вы должны вернуть [Сумма к возврату] рублей. |
|                                                   |
|   ℹ️ Для получения денег, пожалуйста, позвоните   |
|      по телефону +77012345678                     |
|                                                   |
| [ Вернуться назад ]                               |
+---------------------------------------------------+

В случае отказа:

+---------------------------------------------------+
|            Результат заявки на займ               |
+---------------------------------------------------+
|                                                   |
|   ❌ Простите, мы не можем вам помочь.            |
|      [Причина отказа]                             |
|                                                   |
| [ Вернуться назад ]                               |
+---------------------------------------------------+

Функциональные требования к бэк-енд логике

Валидация данных

	•	Email:
	•	Должен соответствовать формату электронной почты.
	•	Должен быть уникальным (не присутствовать в базе данных).
	•	Телефон:
	•	Должен начинаться с “+7” и содержать 10 цифр после кода страны.
	•	Должен быть уникальным (не присутствовать в базе данных).
	•	Дата рождения:
	•	Пользователь должен быть в возрасте от 18 до 90 лет.
	•	Статус занятости:
	•	Должен быть выбран из предложенных вариантов (“Работающий” или “Безработный”).
	•	Пользователь должен быть “Работающим” для одобрения займа.
	•	Месячная зарплата:
	•	Должна быть числом.
	•	Должна быть не менее 100 рублей.
	•	Ежемесячные выплаты по другим кредитам:
	•	Должны быть числом.

Работа с базой данных

	•	Сохранение данных заявки:
	•	При отправке заявки данные сохраняются в базу данных SQLite в таблицу loan_applications.
	•	Проверка уникальности:
	•	Перед сохранением проверяется, что email и телефон не существуют в базе данных.

Расчет суммы займа и общей суммы к возврату

	•	Сумма займа (loan_amount):
	•	Рассчитывается как десятикратная разница между месячной зарплатой и ежемесячными выплатами по другим кредитам.
	•	Формула: loan_amount = (salary - other_loans) * 10
	•	Процентная ставка (interest_rate):
	•	Фиксированная ставка 3% в месяц.
	•	Общая сумма к возврату (total_to_repay):
	•	Рассчитывается на основе суммы займа и процентной ставки за 12 месяцев.
	•	Формула: total_to_repay = loan_amount * (1 + interest_rate * 12)

Пример расчета

	•	Входные данные:
	•	Месячная зарплата: 50,000 рублей
	•	Ежемесячные выплаты по другим кредитам: 5,000 рублей
	•	Расчет суммы займа:
	•	loan_amount = (50,000 - 5,000) * 10 = 450,000 рублей
	•	Расчет общей суммы к возврату:
	•	total_to_repay = 450,000 * (1 + 0.03 * 12) = 450,000 * 1.36 = 612,000 рублей
	•	Результат:
	•	Пользователю предлагается займ в размере 450,000 рублей.
	•	Пользователь должен вернуть 612,000 рублей за год.

Отправка уведомлений по электронной почте

	•	В случае одобрения:
	•	Отправляется письмо с темой “Ваш займ одобрен”.
	•	Текст письма содержит сумму займа, сумму к возврату и контактную информацию для получения денег.
	•	В случае отказа:
	•	Отправляется письмо с темой “Ваш займ отклонен”.
	•	Текст письма содержит причину отказа.

Диаграмма процесса

Описание процесса

	1.	Пользователь открывает приложение и видит форму заявки.
	2.	Пользователь заполняет все поля формы.
	3.	Пользователь нажимает кнопку “Отправить заявку”.
	4.	Приложение выполняет валидацию введенных данных:
	•	Проверка формата email и телефона.
	•	Проверка уникальности email и телефона в базе данных.
	•	Проверка корректности числовых значений зарплаты и выплат по кредитам.
	5.	Если валидация не пройдена:
	•	Отображаются сообщения об ошибках.
	•	Процесс возвращается к шагу 2.
	6.	Если валидация пройдена:
	•	Данные заявки сохраняются в базу данных.
	7.	Приложение проверяет дополнительные условия:
	•	Возраст пользователя (должен быть от 18 до 90 лет).
	•	Статус занятости (должен быть “Работающий”).
	•	Размер зарплаты (должен быть не менее 100 рублей).
	8.	Если условия не выполнены:
	•	Отправляется письмо об отказе с указанием причины.
	•	Пользователь перенаправляется на страницу результата с сообщением об отказе.
	9.	Если условия выполнены:
	•	Расчитываются сумма займа и общая сумма к возврату.
	•	Отправляется письмо об одобрении с деталями займа.
	•	Пользователь перенаправляется на страницу результата с сообщением об одобрении.
	10.	Пользователь просматривает результат и может вернуться на главную страницу для подачи новой заявки.